#include <math.h>
#include <stdio.h>
#include <windows.h>
#include <stdlib.h>

void Color(int couleurDuTexte,int couleurDeFond) // fonction d'affichage de couleurs
{
    HANDLE H=GetStdHandle(STD_OUTPUT_HANDLE);
    SetConsoleTextAttribute(H,couleurDeFond*16+couleurDuTexte);
}
int fct_ligne(int a) {
    switch(a) {
        case 1:return a = 1;break;
        case 2:return a = 3;break;
        case 3:return a = 5;break;
        case 4:return a = 7;break;
        case 5:return a = 9;break;
        case 6:return a = 11;break;
        case 7:return a = 13;break;
        case 8:return a = 15;break;
        case 9:return a = 17;break;
        default: return -1;
            }
}
int fct_colonne(char a) {
    switch(a) {
        case'A': return a =1;break;
        case'B': return a = 3;break;
        case'C': return a = 5;break;
        case'D': return a = 7;break;
        case'E': return a = 9;break;
        case'F': return a = 11;break;
        case'G': return a = 13;break;
        case'H': return a = 15;break;
        case'I': return a = 17;break;
        default:return -1;
    }
}

int main() {
    printf("===========[Qoridor]===========\n\n");
    printf("Bienvenue sur le jeu du Qoridor !\n\n");

    ///////////// JOUEURS ////////////////
    int joueurpartie,joueurhumain,joueurrobot;
    do {
        printf("Pour commencer, voici les modes de jeu disponible :\n- 2 joueurs\n- 4 joueurs\nVeuillez choisir le nombre de joeurs (2 ou 4):\n");
        scanf("%d",&joueurpartie);
    } while(joueurpartie !=2 && joueurpartie !=4);
    do {
        printf("Combien de joueur etes vous a jouer (de 1 a %d)?:",joueurpartie);
        scanf("%d",&joueurhumain);
        joueurrobot = joueurpartie - joueurhumain;
    }
    while( joueurhumain <1 || joueurhumain >joueurpartie);
    printf("Il y aura donc %d IA dans la partie !\n",joueurrobot);

    char nom[4][20]={"1","2","3","4"};
    char nomia[3][20]={"ia1","ia2","ia3"};
    int j=0;
    for(int i=1;i<=joueurpartie;i++) {
        if(i<=joueurhumain){
            printf("Joueur %d, il est temps d'ecrire votre nom:",i);
            scanf("%s",nom[i]);
        }
        else {

            if (j < joueurrobot) ;
            strcpy(nom[i], nomia[j]);
            j++;
        }
    }


    printf("\nLes joueurs de cette partie sont :\n");
    for (int i=1;i<=joueurpartie;i++){
        printf("%s",nom[i]);
        printf("\n");
    }

    //////// JETON  ////////





    ////////// Plateau ///////////
    char plateau[18][18] = {
        {' ','A',' ','B',' ','C',' ','D',' ','E',' ','F',' ','G',' ','H',' ','I'},
        {'1',0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0},
        {' ',1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
        {'2',0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0},
        {' ',1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
        {'3',0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0},
        {' ',1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
        {'4',0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0},
        {' ',1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
        {'5',0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0},
        {' ',1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
        {'6',0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0},
        {' ',1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
        {'7',0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0},
        {' ',1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
        {'8',0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0},
        {' ',1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
        {'9',0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0},
        };

    printf("\nVoici le plateau original :\n");
    int couleurcases=15,cases;
    printf("\n");

    for(int i=0;i<18;i++) {
        for(int j=0;j<18;j++){

            if(plateau[i][j]==1) {
                Color(7,7);
                printf(" %d ",plateau[i][j]);
            }

            else if(plateau[i][j]==0) {
                Color(couleurcases,couleurcases);
                printf(" %c ",plateau[i][j]);
            }
            else {
                Color(15,0);
                printf(" %c ",plateau[i][j]);
            }

        }
        printf("\n");
    }
    int choix,choix2;
    Color(15,0);
    do {
        printf("Souhaitez-vous changer les couleurs des cases ?\n1 - OUI\n2 - NON\nA vous de choisir: ");
        scanf("%d",&cases);
    }
    while(cases!=1 && cases!=2);

    if(cases==1) {
        do {
            do {
                printf("Veuillez choisir parmi ces couleurs :\n1 - Blanc\n2 - Jaune \n3 - Turquoise\n4 - Noir\n5 - Rouge:");
                scanf("%d",&choix);
            }
            while (choix<1 || choix>5);
            switch (choix) {
                case 1: couleurcases=15;
                break;
                case 2: couleurcases=14;
                break;
                case 3: couleurcases=1;
                break;
                case 4: couleurcases=0;
                break;
                default : couleurcases=4;
            }
            for(int i=0;i<18;i++) {
                for(int j=0;j<18;j++){

                    if(plateau[i][j]==1) {
                        Color(7,7);
                        printf(" %d ",plateau[i][j]);
                    }
                    else if(plateau[i][j]==2) {
                        Color(0,0);
                        printf(" %d ",plateau[i][j]);

                    }
                    else if (plateau[i][j]==0){
                        Color(couleurcases,couleurcases);
                        printf(" %c ",plateau[i][j]);
                    }
                    else {
                        Color(15,0);
                        printf(" %c ",plateau[i][j]);
                    }

                }
                printf("\n");
            }
            do {
                Color(15,0);
                printf("Est-ce votre choix definitif ? :\n1 - OUI\n2 - NON");
                scanf("%d",&choix2);
            }
            while (choix2<1 || choix2>2);
        }
        while(choix2!=1);
    }printf("La Partie peut enfin commencer !!");



    /////// BARRIERE ////////

    char x2,x1;
    int y1,y2,a,b;

    do {
        printf("\nVeuillez donner barriere (A1 A2) :");
        scanf(" %c%d %c%d",&x1,&y1,&x2,&y2);
        y1= fct_ligne(y1);
        y2 = fct_ligne(y2);
        x1 = fct_colonne(x1);
        x2 = fct_colonne(x2);
        printf("%d %d %d %d",x1,y1,x2,y2);
        a = x1-x2;
        b = y1-y2;
        printf("\n Voici x1-x2=%d et y1-y2=%d",a,b);
    } while ( !((a==2 || a==-2)&& b==0) && !((b==2 || b==-2) && a==0) );
    int choixbarriere;
    if (a==0) {
        printf("Veuillez choisir:\n1 - Gauche\n2 - Droite\nLequel choissisez vous :");
        scanf("%d",&choixbarriere);
        if(choixbarriere==1) {
    }

}
